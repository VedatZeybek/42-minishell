<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 24px Arial; text-anchor: middle; fill: #2c3e50; }
      .subtitle { font: bold 16px Arial; text-anchor: middle; fill: #34495e; }
      .label { font: 14px Arial; text-anchor: middle; fill: #2c3e50; }
      .small-label { font: 12px Arial; text-anchor: middle; fill: #555; }
      .module { fill: #3498db; stroke: #2980b9; stroke-width: 2; rx: 8; }
      .core { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; rx: 8; }
      .input { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; rx: 8; }
      .execution { fill: #f39c12; stroke: #e67e22; stroke-width: 2; rx: 8; }
      .builtin { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; rx: 8; }
      .utils { fill: #1abc9c; stroke: #16a085; stroke-width: 2; rx: 8; }
      .arrow { stroke: #34495e; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .flow-arrow { stroke: #e67e22; stroke-width: 3; fill: none; marker-end: url(#orangearrow); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e" />
    </marker>
    <marker id="orangearrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e67e22" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" class="title">Minishell Mimarisi</text>
  
  <!-- Main Loop -->
  <rect x="500" y="60" width="200" height="60" class="core"/>
  <text x="600" y="85" class="subtitle">Main Loop</text>
  <text x="600" y="105" class="small-label">while(shell.running)</text>
  
  <!-- Input Module -->
  <g>
    <rect x="50" y="180" width="300" height="120" class="input"/>
    <text x="200" y="205" class="subtitle">INPUT MODULE</text>
    
    <rect x="70" y="220" width="120" height="35" class="module"/>
    <text x="130" y="242" class="label">read_line()</text>
    
    <rect x="210" y="220" width="120" height="35" class="module"/>
    <text x="270" y="242" class="label">Signal Handler</text>
    
    <rect x="70" y="265" width="120" height="25" class="module"/>
    <text x="130" y="280" class="small-label">readline()</text>
    
    <rect x="210" y="265" width="120" height="25" class="module"/>
    <text x="270" y="280" class="small-label">add_history()</text>
  </g>
  
  <!-- Parsing Module -->
  <g>
    <rect x="450" y="180" width="300" height="120" class="input"/>
    <text x="600" y="205" class="subtitle">PARSING MODULE</text>
    
    <rect x="470" y="220" width="100" height="35" class="module"/>
    <text x="520" y="242" class="label">Tokenizer</text>
    
    <rect x="590" y="220" width="100" height="35" class="module"/>
    <text x="640" y="242" class="label">Parser</text>
    
    <rect x="470" y="265" width="100" height="25" class="module"/>
    <text x="520" y="280" class="small-label">split_args()</text>
    
    <rect x="590" y="265" width="100" height="25" class="module"/>
    <text x="640" y="280" class="small-label">parse_cmd()</text>
  </g>
  
  <!-- Expansion Module -->
  <g>
    <rect x="850" y="180" width="300" height="120" class="input"/>
    <text x="1000" y="205" class="subtitle">EXPANSION MODULE</text>
    
    <rect x="870" y="220" width="120" height="35" class="module"/>
    <text x="930" y="242" class="label">Variable Exp.</text>
    
    <rect x="1010" y="220" width="120" height="35" class="module"/>
    <text x="1070" y="242" class="label">Quote Removal</text>
    
    <rect x="870" y="265" width="120" height="25" class="module"/>
    <text x="930" y="280" class="small-label">expand_vars()</text>
    
    <rect x="1010" y="265" width="120" height="25" class="module"/>
    <text x="1070" y="280" class="small-label">remove_quotes()</text>
  </g>
  
  <!-- Execution Engine -->
  <g>
    <rect x="400" y="360" width="400" height="80" class="execution"/>
    <text x="600" y="385" class="subtitle">EXECUTION ENGINE</text>
    
    <rect x="420" y="405" width="100" height="25" class="module"/>
    <text x="470" y="420" class="small-label">execute_cmd()</text>
    
    <rect x="540" y="405" width="100" height="25" class="module"/>
    <text x="590" y="420" class="small-label">handle_pipes()</text>
    
    <rect x="660" y="405" width="100" height="25" class="module"/>
    <text x="710" y="420" class="small-label">redirections()</text>
  </g>
  
  <!-- Built-in Commands -->
  <g>
    <rect x="50" y="480" width="280" height="120" class="builtin"/>
    <text x="190" y="505" class="subtitle">BUILT-IN COMMANDS</text>
    
    <rect x="70" y="525" width="60" height="25" class="module"/>
    <text x="100" y="540" class="small-label">echo</text>
    
    <rect x="140" y="525" width="60" height="25" class="module"/>
    <text x="170" y="540" class="small-label">cd</text>
    
    <rect x="210" y="525" width="60" height="25" class="module"/>
    <text x="240" y="540" class="small-label">pwd</text>
    
    <rect x="70" y="560" width="60" height="25" class="module"/>
    <text x="100" y="575" class="small-label">export</text>
    
    <rect x="140" y="560" width="60" height="25" class="module"/>
    <text x="170" y="575" class="small-label">unset</text>
    
    <rect x="210" y="560" width="60" height="25" class="module"/>
    <text x="240" y="575" class="small-label">env</text>
    
    <rect x="105" y="580" width="60" height="15" class="module"/>
    <text x="135" y="590" class="small-label">exit</text>
  </g>
  
  <!-- External Commands -->
  <g>
    <rect x="870" y="480" width="280" height="120" class="execution"/>
    <text x="1010" y="505" class="subtitle">EXTERNAL COMMANDS</text>
    
    <rect x="890" y="525" width="80" height="25" class="module"/>
    <text x="930" y="540" class="small-label">fork()</text>
    
    <rect x="980" y="525" width="80" height="25" class="module"/>
    <text x="1020" y="540" class="small-label">execve()</text>
    
    <rect x="1070" y="525" width="80" height="25" class="module"/>
    <text x="1110" y="540" class="small-label">wait()</text>
    
    <rect x="890" y="560" width="120" height="25" class="module"/>
    <text x="950" y="575" class="small-label">find_in_path()</text>
    
    <rect x="1020" y="560" width="120" height="25" class="module"/>
    <text x="1080" y="575" class="small-label">setup_redirections()</text>
  </g>
  
  <!-- Utils -->
  <g>
    <rect x="450" y="480" width="300" height="120" class="utils"/>
    <text x="600" y="505" class="subtitle">UTILITY FUNCTIONS</text>
    
    <rect x="470" y="525" width="80" height="25" class="module"/>
    <text x="510" y="540" class="small-label">ft_split()</text>
    
    <rect x="560" y="525" width="80" height="25" class="module"/>
    <text x="600" y="540" class="small-label">ft_strjoin()</text>
    
    <rect x="650" y="525" width="80" height="25" class="module"/>
    <text x="690" y="540" class="small-label">ft_strdup()</text>
    
    <rect x="470" y="560" width="100" height="25" class="module"/>
    <text x="520" y="575" class="small-label">error_handling()</text>
    
    <rect x="580" y="560" width="100" height="25" class="module"/>
    <text x="630" y="575" class="small-label">memory_mgmt()</text>
  </g>
  
  <!-- Environment -->
  <g>
    <rect x="50" y="650" width="200" height="80" class="utils"/>
    <text x="150" y="675" class="subtitle">ENVIRONMENT</text>
    
    <rect x="70" y="695" width="80" height="25" class="module"/>
    <text x="110" y="710" class="small-label">env_vars</text>
    
    <rect x="160" y="695" width="80" height="25" class="module"/>
    <text x="200" y="710" class="small-label">exit_status</text>
  </g>
  
  <!-- Data Structures -->
  <g>
    <rect x="950" y="650" width="200" height="80" class="core"/>
    <text x="1050" y="675" class="subtitle">DATA STRUCTURES</text>
    
    <rect x="970" y="695" width="80" height="25" class="module"/>
    <text x="1010" y="710" class="small-label">t_shell</text>
    
    <rect x="1060" y="695" width="80" height="25" class="module"/>
    <text x="1100" y="710" class="small-label">t_cmd</text>
  </g>
  
  <!-- Flow arrows -->
  <path d="M 600 120 L 200 180" class="flow-arrow"/>
  <path d="M 350 240 L 450 240" class="flow-arrow"/>
  <path d="M 750 240 L 850 240" class="flow-arrow"/>
  <path d="M 600 300 L 600 360" class="flow-arrow"/>
  
  <!-- Connection arrows -->
  <path d="M 450 400 L 330 480" class="arrow"/>
  <path d="M 750 400 L 870 480" class="arrow"/>
  <path d="M 600 440 L 600 480" class="arrow"/>
  
  <!-- Legend -->
  <g transform="translate(300, 750)">
    <text x="0" y="-20" class="subtitle">Modül Türleri:</text>
    <rect x="0" y="0" width="15" height="15" class="input"/>
    <text x="20" y="12" class="small-label">Input/Parsing</text>
    
    <rect x="120" y="0" width="15" height="15" class="execution"/>
    <text x="140" y="12" class="small-label">Execution</text>
    
    <rect x="230" y="0" width="15" height="15" class="builtin"/>
    <text x="250" y="12" class="small-label">Built-ins</text>
    
    <rect x="320" y="0" width="15" height="15" class="utils"/>
    <text x="340" y="12" class="small-label">Utils</text>
    
    <rect x="410" y="0" width="15" height="15" class="core"/>
    <text x="430" y="12" class="small-label">Core</text>
  </g>
</svg>